function _defineProperties(n,l){for(var e=0;e<l.length;e++){var t=l[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,l,e){return l&&_defineProperties(n.prototype,l),e&&_defineProperties(n,e),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{"5zjZ":function(n,l,e){"use strict";e.r(l);var t,u=e("8Y7J"),o=function n(){_classCallCheck(this,n)},i=e("pMnS"),r=e("MKJQ"),s=e("sZkV"),a=e("SVse"),b=e("s7LF"),c=e("U0XV"),h=e("AytR"),p=e("IheW"),g=((t=function(){function n(l,e){_classCallCheck(this,n),this.http=l,this.userService=e,this.url=h.a.URL+"/chats/",this.urlSend=h.a.URL+"/updatechat/"}return _createClass(n,[{key:"setChatPerson",value:function(n){this.person2=n,this.person1=this.userService.getName()}},{key:"getMessagesHttp",value:function(){return this.http.get(this.url+this.person1+"/"+this.person2)}},{key:"sendMessage",value:function(n){this.http.post(this.urlSend+this.person1+"/"+this.person2,{sender:this.person1,message:n}).subscribe()}}]),n}()).ngInjectableDef=u.Kb({factory:function(){return new t(u.Lb(p.c),u.Lb(c.a))},token:t,providedIn:"root"}),t),d=e("l5mm"),f=function(){function n(l,e,t,u){_classCallCheck(this,n),this.route=l,this.chatService=e,this.userService=t,this.router=u,this.source=Object(d.a)(1e3)}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;""===this.userService.getName()&&this.router.navigateByUrl("/sign-in"),this.other=this.route.snapshot.paramMap.get("user"),this.chatService.setChatPerson(this.other),this.updateChats(),this.subscription=this.source.subscribe((function(l){return n.updateChats()}))}},{key:"send",value:function(){this.chatService.sendMessage(this.chatText),this.chatText=""}},{key:"updateChats",value:function(){var n=this;this.chatService.getMessagesHttp().subscribe((function(l){n.chats=l.chats,console.log(n.chats),Array.isArray(n.chats)&&n.chats.length&&(n.messages=JSON.parse(n.chats[0].chat))}))}}]),n}(),x=e("iInd"),y=u.nb({encapsulation:0,styles:[['@charset "UTF-8";bubble[_ngcontent-%COMP%]{background-color:#f2f2f2;border-radius:5px;box-shadow:0 0 6px #b2b2b2;display:inline-block;padding:10px 18px;position:relative;vertical-align:top}.bubble[_ngcontent-%COMP%]::before{background-color:#f2f2f2;content:"\xa0";display:block;height:16px;position:absolute;top:11px;transform:rotate(29deg) skew(-35deg);-moz-transform:rotate(29deg) skew(-35deg);-ms-transform:rotate(29deg) skew(-35deg);-o-transform:rotate(29deg) skew(-35deg);-webkit-transform:rotate(29deg) skew(-35deg);width:20px}.me[_ngcontent-%COMP%]{float:left;margin:5px 45px 5px 20px}.me[_ngcontent-%COMP%]::before{box-shadow:-2px 2px 2px 0 rgba(178,178,178,.4);left:-9px}.you[_ngcontent-%COMP%]{float:right;margin:5px 20px 5px 45px}.you[_ngcontent-%COMP%]::before{box-shadow:2px -2px 2px 0 rgba(178,178,178,.4);right:-9px}']],data:{}});function k(n){return u.Gb(0,[(n()(),u.pb(0,0,null,null,4,"ion-item",[["lines","none"],["routerDirection","root"]],null,null,null,r.G,r.l)),u.ob(1,49152,null,0,s.E,[u.h,u.k,u.x],{lines:[0,"lines"],routerDirection:[1,"routerDirection"]},null),(n()(),u.pb(2,0,null,0,2,"ion-label",[],null,null,null,r.H,r.m)),u.ob(3,49152,null,0,s.K,[u.h,u.k,u.x],null,null),(n()(),u.Fb(4,0,[""," : ",""]))],(function(n,l){n(l,1,0,"none","root")}),(function(n,l){n(l,4,0,l.context.$implicit.sender,l.context.$implicit.message)}))}function C(n){return u.Gb(0,[(n()(),u.pb(0,0,null,null,10,"ion-header",[],null,null,null,r.D,r.i)),u.ob(1,49152,null,0,s.y,[u.h,u.k,u.x],{translucent:[0,"translucent"]},null),(n()(),u.pb(2,0,null,0,8,"ion-toolbar",[],null,null,null,r.P,r.u)),u.ob(3,49152,null,0,s.wb,[u.h,u.k,u.x],null,null),(n()(),u.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,r.x,r.c)),u.ob(5,49152,null,0,s.i,[u.h,u.k,u.x],null,null),(n()(),u.pb(6,0,null,0,1,"ion-menu-button",[],null,null,null,r.K,r.q)),u.ob(7,49152,null,0,s.O,[u.h,u.k,u.x],null,null),(n()(),u.pb(8,0,null,0,2,"ion-title",[],null,null,null,r.O,r.t)),u.ob(9,49152,null,0,s.ub,[u.h,u.k,u.x],null,null),(n()(),u.Fb(10,0,["Chat with ",""])),(n()(),u.pb(11,0,null,null,28,"ion-content",[],null,null,null,r.C,r.h)),u.ob(12,49152,null,0,s.r,[u.h,u.k,u.x],null,null),(n()(),u.pb(13,0,null,0,26,"ion-card",[],null,null,null,r.B,r.d)),u.ob(14,49152,null,0,s.j,[u.h,u.k,u.x],null,null),(n()(),u.pb(15,0,null,0,24,"ion-card-content",[],null,null,null,r.y,r.e)),u.ob(16,49152,null,0,s.k,[u.h,u.k,u.x],null,null),(n()(),u.pb(17,0,null,0,22,"ion-list",[["id","labels-list"]],null,null,null,r.J,r.n)),u.ob(18,49152,null,0,s.L,[u.h,u.k,u.x],null,null),(n()(),u.eb(16777216,null,0,1,null,k)),u.ob(20,278528,null,0,a.h,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null),(n()(),u.pb(21,0,null,0,13,"ion-item",[],null,null,null,r.G,r.l)),u.ob(22,49152,null,0,s.E,[u.h,u.k,u.x],null,null),(n()(),u.pb(23,0,null,0,2,"ion-label",[["floating",""]],null,null,null,r.H,r.m)),u.ob(24,49152,null,0,s.K,[u.h,u.k,u.x],null,null),(n()(),u.Fb(-1,0,["Message: "])),(n()(),u.pb(26,0,null,0,8,"ion-input",[["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var t=!0,o=n.component;return"ionBlur"===l&&(t=!1!==u.Ab(n,29)._handleBlurEvent(e.target)&&t),"ionChange"===l&&(t=!1!==u.Ab(n,29)._handleInputEvent(e.target)&&t),"ngModelChange"===l&&(t=!1!==(o.chatText=e)&&t),t}),r.F,r.k)),u.ob(27,16384,null,0,b.g,[],{required:[0,"required"]},null),u.Cb(1024,null,b.b,(function(n){return[n]}),[b.g]),u.ob(29,16384,null,0,s.Fb,[u.k],null,null),u.Cb(1024,null,b.c,(function(n){return[n]}),[s.Fb]),u.ob(31,671744,null,0,b.f,[[8,null],[6,b.b],[8,null],[6,b.c]],{model:[0,"model"]},{update:"ngModelChange"}),u.Cb(2048,null,b.d,null,[b.f]),u.ob(33,16384,null,0,b.e,[[4,b.d]],null,null),u.ob(34,49152,null,0,s.D,[u.h,u.k,u.x],{required:[0,"required"],type:[1,"type"]},null),(n()(),u.pb(35,0,null,0,4,"ion-item",[],null,null,null,r.G,r.l)),u.ob(36,49152,null,0,s.E,[u.h,u.k,u.x],null,null),(n()(),u.pb(37,0,null,0,2,"ion-button",[["color","secondary"],["full",""],["round",""],["type","submit"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.send()&&t),t}),r.w,r.b)),u.ob(38,49152,null,0,s.h,[u.h,u.k,u.x],{color:[0,"color"],type:[1,"type"]},null),(n()(),u.Fb(-1,0,["Send"]))],(function(n,l){var e=l.component;n(l,1,0,!0),n(l,20,0,e.messages),n(l,27,0,""),n(l,31,0,e.chatText),n(l,34,0,"","text"),n(l,38,0,"secondary","submit")}),(function(n,l){n(l,10,0,l.component.other),n(l,26,0,u.Ab(l,27).required?"":null,u.Ab(l,33).ngClassUntouched,u.Ab(l,33).ngClassTouched,u.Ab(l,33).ngClassPristine,u.Ab(l,33).ngClassDirty,u.Ab(l,33).ngClassValid,u.Ab(l,33).ngClassInvalid,u.Ab(l,33).ngClassPending)}))}var m=u.lb("app-chat",f,(function(n){return u.Gb(0,[(n()(),u.pb(0,0,null,null,1,"app-chat",[],null,null,null,C,y)),u.ob(1,114688,null,0,f,[x.a,g,c.a,x.m],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),v=function n(){_classCallCheck(this,n)};e.d(l,"ChatPageModuleNgFactory",(function(){return w}));var w=u.mb(o,[],(function(n){return u.xb([u.yb(512,u.j,u.X,[[8,[i.a,m]],[3,u.j],u.v]),u.yb(4608,a.j,a.i,[u.s,[2,a.p]]),u.yb(4608,b.i,b.i,[]),u.yb(4608,s.a,s.a,[u.x,u.g]),u.yb(4608,s.Ab,s.Ab,[s.a,u.j,u.p]),u.yb(4608,s.Db,s.Db,[s.a,u.j,u.p]),u.yb(1073742336,a.b,a.b,[]),u.yb(1073742336,b.h,b.h,[]),u.yb(1073742336,b.a,b.a,[]),u.yb(1073742336,s.yb,s.yb,[]),u.yb(1073742336,x.p,x.p,[[2,x.u],[2,x.m]]),u.yb(1073742336,v,v,[]),u.yb(1073742336,o,o,[]),u.yb(1024,x.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);